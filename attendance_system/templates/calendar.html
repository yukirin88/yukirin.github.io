{% extends "bootstrap/base.html" %}
{% block title %}カレンダー{% endblock %}

{% block content %}
<div class="container">
    <h2>{{ year }}年{{ month }}月</h2>
    
    <div class="calendar-controls mb-3">
        <a href="{{ url_for('calendar_view', year=prev_year, month=prev_month) }}" 
           class="btn btn-outline-primary btn-sm">← 前月</a>
        <a href="{{ url_for('calendar_view', year=next_year, month=next_month) }}" 
           class="btn btn-outline-primary btn-sm">次月 →</a>
        <a href="{{ url_for('index') }}" class="btn btn-primary">ホームに戻る</a>
    </div>

    <table class="table table-bordered">
        <thead class="thead-light">
            <tr>
                <th scope="col">月</th>
                <th scope="col">火</th>
                <th scope="col">水</th>
                <th scope="col">木</th>
                <th scope="col">金</th>
                <th scope="col">土</th>
                <th scope="col">日</th>
            </tr>
        </thead>
        <tbody>
            {% for week in cal %}
                <tr>
                    {% for day in week %}
                        <td class="calendar-day {% if day == today.day and month == today.month and year == today.year %}table-primary{% endif %}">
                            {% if day != 0 %}
                                <div class="date-number">{{ day }}</div>
                                <a href="{{ url_for('day_records', date='%04d-%02d-%02d'|format(year, month, day)) }}" 
                                   class="stretched-link"></a>
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
.calendar-day {
    height: 100px;
    position: relative;
}
.date-number {
    position: absolute;
    top: 5px;
    left: 5px;
    font-weight: bold;
}
.stretched-link {
    display: block;
    height: 100%;
    width: 100%;
}
</style>
{% endblock %}
