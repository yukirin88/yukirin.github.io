{% extends "bootstrap/base.html" %}
{% block title %}管理者ダッシュボード{% endblock %}
{% block content %}
<a href="{{ url_for('logout') }}" class="btn btn-primary">ログアウト</a>

<h2>ユーザーリスト</h2>
<table>
  <thead>
    <tr>
      <th>ユーザー名</th>
      <th>削除</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
      <tr>
        <td>{{ user.username }}</td>
        <td>
          <form action="{{ url_for('delete_user', user_id=user.id) }}" method="post">
            <button type="submit" class="btn btn-danger btn-sm">削除</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<h2>記録一覧</h2>
<table>
  <thead>
    <tr>
      <th>ユーザー名</th>
      <th>時間</th>
      <th>行動</th>
      <th>状態</th>
      <th>メモ</th>
    </tr>
  </thead>
  <tbody>
    {% for record in all_records %}
      <tr>
        <td>{{ record.username }}</td>
        <td>{{ record.timestamp }}</td>
        <td>{{ record.action }}</td>
        <td>
      {% if record.is_deleted %}
      削除済み
      {% else %}
      現存
      {% endif %}
        </td>
        </td>
      <td>{{ record.memo if record.memo else '---' }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
